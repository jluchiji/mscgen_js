<!DOCTYPE html>
<html>
<head>
<!--
This file is part of mscgen_js.

mscgen_js is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

mscgen_js is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
-->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="message sequence chart renderer">
<meta name="keywords" content="mscgen,msc,sequence diagram, sequence chart, online sequence diagram, online sequence chart">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- <meta http-equiv="refresh" content="3"> -->
<title>mscgen_js - tutorial</title>
<link rel="stylesheet" href="tutorial.css" type="text/css" media="screen">

<body>
<article id="msgenny" class="shadow">
<h1>Language tutorial</h1>
<nav>
<ul>
    <li>
        <a href="#basics">Basics</a>
        <ul>
            <li>
                <a href="#a-sends-a-signal-to-b">a sends a signal to b</a>
            <li>
                <a href="#adding-text">adding text</a>
            <li>
                <a href="#b-replies-to-a">b replies to a</a>
            <li>
                <a href="#notes">notes</a>
            <li>
                <a href="#multiline-text">multiline text</a>
            <li>
                <a href="#empty-rows-omitted-rows-comments">empty rows, omitted rows, comments</a>
            <li>
                <a href="#ignore-this">ignore this</a>
        </ul>
    <li>
        <a href="#advanced-stuff">Advanced stuff</a>
        <ul>
            <li>
                <a href="#options-arcgradient-hscale-width">options: arcgradient, hscale, width</a>
            <li>
                <a href="#naming-entities-explicit-order">naming entities, explicit order</a>
            <li>
                <a href="#broadcasts-parallel-calls">broadcasts, parallel calls</a>
            <li>
                <a href="#both-ways-no-way">both ways, no way</a>
            <li>
                <a href="#box-rbox-abox">box, rbox, abox</a>
        </ul>
</ul>
</nav>

<section>
<h2 id="basics">Basics</h2>

<h3 id="a-sends-a-signal-to-b"><code>a</code> sends a signal to <code>b</code></h3>
<p>The most simple sequence chart is the one where an entity <code>a</code> sends a signal to an entity <code>b</code></p>
<pre class="code msgenny">
a -> b;
</pre>
<img alt="tut01" src="tutorial/tut01.svg">
<p>As you can see this creates two entities (a and b), both with a lifeline, and an arrow from the first to the second lifeline.</p>
            

<h3 id="adding-text">Adding labels</h3>
<p>To add a label to your signal, put it behind a colon, like so:</p>
<pre class="code msgenny">
a -> b<mark>: "ping"</mark>;
</pre>            


<img id="tut02" src="tutorial/tut02.svg" alt="tut02">

<p class="info">Note: when your description doesn't contain a <code>,</code> or a <code>;</code>
it is possible to leave the quotes out of the label, so in this case 
<code class="msgenny">a -> b: ping;</code> would have achieved exactly the same effect.</p>

<h3 id="b-replies-to-a"><code>b</code> replies to <code>a</code></h3>
<p>Adding extra parts to the conversation works along the same lines</p>
<pre class="code msgenny">
a -> b: ping;
<mark>b >> a: heard ya!;</mark>
</pre>                        
<img id="tut03" src="tutorial/tut03.svg" alt="tut03">
<p>There is a plethora of arcs (arrows, lines) at your disposal. We've thrown
a small cheat sheet together that sums up the basic ones 
(<a href="tutorial/test14_cheat_sheet.svg" target="_blank">svg</a>, 
<a href="tutorial/test14_cheat_sheet.png" target="_blank">png</a>). As we've 
been using it quite a lot, we've put it behind the (?) button in the online
demo as well.</p>

<h3 id="notes">Notes</h3>
<p>To add a note to a chart use the special <code>note</code> arc type. 
Notes are similar to arcs in that they start on a lifeline and end
on one.</p>
<pre class="code msgenny">
a -> b: ping;
b >> a: heard ya!;
<mark>a note a: we're not done yet ...;</mark>
</pre>                        
<img id="tut04" src="tutorial/tut04.svg" alt="tut04">

<h3 id="multiline-text">Multiline text</h3>
<p>You can break a long label in pieces by putting the (c-style) escape code 
<code>\n</code> on the spots you want to split the label. This works for 
<em>all</em> labels.</p>
<pre class="code msgenny">
a note b: This is a note consisting of<mark>\n</mark>two lines of text;
b => c  : Breaking text in two<mark>\n</mark>also works for arcs;
</pre>                        
<img id="tut05" src="tutorial/tut05.svg" alt="tut05">

<h3 id="empty-rows-omitted-rows-comments">Empty rows, omitted rows, comments</h3>
<p>Sometimes your chart needs some more space between arcs, e.g. to emphasise grouping.</p>
<pre class="code msgenny">
a =>> b: do something for me;
b >>  a: done;
<mark>|||;</mark>
a => c : "b is done doing something;\ngo bother him";
c -> b : bother;
</pre>                        
<img id="tut06" src="tutorial/tut06.svg" alt="tut06">

<p>To indicate you deliberately left out stuff of your chart, you can use ellipses, like this:</p>
 <pre class="code msgenny">
a =>> b: Do the voodoo;
b => c : Iberian dance task;
c -x b : Whaaat?;
<mark>...    : magic happens here;</mark>
b >> a : Magic answer;
</pre>
<img id="tut07" src="tutorial/tut07.svg" alt="tut07">

<p>To demarcate more strongly and/ or to comment on a part, use <em>comment</em> (---), like so:</p>
 <pre class="code msgenny">
a =>> b: readOutLoud\n(message);
<mark>---    : for each line in the message:;</mark>
b => "text to\nspeach": getAudio (line);
"text to\nspeach" >> b: lAudioStream;
b -> speaker: play(lAudioStream);
</pre>
<img id="tut08" src="tutorial/tut08.svg" alt="tut08">

<h3 id="ignore-this">Ignore this</h3>
<p>In your program lines starting with <code>#</code> or <code>//</code> 
    are ignored, as is everything between <code>/* c-style block comments */</code></p>
<pre class="code msgenny">
<mark># This line is ignored</mark>
a =>> b: what's happening here? ; <mark>/* don't know */</mark>
<mark>// ignored line</mark>
</pre>                        
<img id="tut09" src="tutorial/tut09.svg" alt="tut09">
<p class="warning">Caveat: on translating to mscgen all ignorable text gets lost.</p>
</section>

<section>
<h2 id="advanced-stuff">Advanced stuff</h2>
<h3 id="options-arcgradient-hscale-width">Options: arcgradient, hscale, width, wordwraparcs</h3>
<p>With <em>arcgradient</em> all lines get skewed a little.</p>
<p>Options go on top</p>
<pre class="code msgenny">
<mark>arcgradient="10"</mark>;

client => server : SYN;
server => client : SYN + ACK;
client => server : ACK;
</pre>                        
<img id="tut10" src="tutorial/tut10.svg" alt="tut10">

<p><em>hscale</em> horizontally scales the chart a bit. Numbers bigger than 1 enlarge 
it; smaller than 1 shrink it.</p>
<pre class="code msgenny">
arcgradient="10", <mark>hscale="0.6"</mark>;

client => server : SYN;
server => client : SYN + ACK;
client => server : ACK;
</pre>
<img id="tut11" src="tutorial/tut11.svg" alt="tut11">

<p>... and <em>width</em> scales the whole chart so it fits in exactly the amount of pixels width.</p>
<pre class="code msgenny">
arcgradient="10", <mark>width="240"</mark>;

client => server : SYN;
server => client : SYN + ACK;
client => server : ACK;
</pre>
<img id="tut12" src="tutorial/tut12.svg" alt="tut12">

<p>The default behaviour for regular (= not note, box, abox or rbox) arcs is that 
text does <em>not</em> get wrapped automatically. To override this you can use the
boolean <em>wordwraparcs</em> option. Just like the other options, this one was
copied from <em>mscgen</em>. <em>mscgen</em> not only accepts <code>true</code> and
<code>false</code>, but also <code>on</code> and <code>off</code> and <code>1</code>
and <code>0</code> all with or without quotes.    

<pre class="code msgenny">
<mark>wordwraparcs=false</mark>; # default behaviour
a =>   b : This will get wrapped when wordwraparcs=true;
a note b : "Text in notes, boxes (box, abox, rbox) 
            and entities gets wrapped automatically.
            The wordwraparcs option does not influence
            that behavior.";
</pre>
<img id="tut13a" src="tutorial/tut13a.svg" alt="tut13a">

<pre class="code msgenny">
<mark>wordwraparcs=true</mark>; # override default behaviour
a =>   b : This will get wrapped when wordwraparcs=true;
a note b : "Text in notes, boxes (box, abox, rbox) 
            and entities gets wrapped automatically.
            The wordwraparcs option does not influence
            that behavior.";
</pre>
<img id="tut13b" src="tutorial/tut13b.svg" alt="tut13b">

</p>



<h3 id="naming-entities-explicit-order">Explicit entity declarations: labeling entities, use your own order</h3>
<p>To prevent you from having to enter long entity names in each line, you can explicitly 
declare entity names at the start of your script and give them labels. </p>
<pre class="code msgenny">
<mark>A: Actor, fe:Front end, be: Back end;</mark>

A =>> fe: "log me in\n(id, secret)";
fe => be: "getToken\n(id, secret)";
fe &lt;&lt; be: [OK] token;
A &lt;&lt; fe: Whoop!;
</pre>
<img id="tut14" src="tutorial/tut14.svg" alt="tut14">

<p>The msgenny parser puts the entities in the order they occur in your script, e.g. </p>
<pre class="code msgenny">
1 =>> 4;
3 >> 2;
</pre>
<img id="tut15" src="tutorial/tut15.svg" alt="tut15">

<p>If that's not what you want, declare them in the order you want them to appear:</p>
<pre class="code msgenny">
<mark>1,2,3,4;</mark>

1 =>> 4;
3 >> 2;
</pre>
<img id="tut16" src="tutorial/tut16.svg" alt="tut16">

<h3 id="broadcasts-parallel-calls">broadcasts, parallel calls</h3>
<p>When an entity has to send a message to all entities at once (broadcast) use <code>*</code> as entity name. 
    When you use this it is practical to use the arcgradient option to prevent lines from overlapping.</p> 
<pre class="code msgenny">
arcgradient="14";
a, b, c, d;
b =>> <mark>*</mark>;
</pre>                        
<img id="tut17" src="tutorial/tut17.svg" alt="tut17">

<p>In situations where you want to epress two calls being executed in parallel (or for some
other reason want to see two arcs on one row), seperat them with a <code>,</code> in stead
of with a <code>;</code></p>
<pre class="code msgenny">
a, b, c, n;
a => b: parallel\nwith c => b<mark>,</mark>
c => b: parallel\nwith a => b<mark>,</mark>
n note n: a note on\nthe same line;
</pre>
<img id="tut18" src="tutorial/tut18.svg" alt="tut18">

<h3 id="both-ways-no-way">Both ways, no way</h3>
<p>For almost every arc type (<code>-></code>, <code>=></code>, <code>=>></code>, 
<code>>></code>, <code>:></code>) a two way variant exists, as well as a variant 
without arrows: </p>
<pre class="code msgenny">
a &lt;-> b, b &lt;=> c;
a &lt;&lt;=>> b, b &lt;&lt;>> c;
a -- b, b .. c;
a :: b, b &lt;:> c ;
</pre>
<img id="tut19" src="tutorial/tut19.svg" alt="tut19">

<h3 id="box-rbox-abox">box, rbox, abox</h3>
<p>State and condition boxes are part of the origin mscgen standard, and hence they're supported in ms genny as well. </p>
<pre class="code msgenny">
a  <mark>box</mark> b :  box;
b <mark>abox</mark> c : abox;
c <mark>rbox</mark> d : rbox;
</pre>
<img id="tut20" src="tutorial/tut20.svg" alt="tut20">
</section>
</article>

<article id="demo" class="shadow">
<h1>Using the on line demo</h1>
<p>By default renders as you type.</p>
<img class="shadow" src="tutorial/demo - screenshot - autofaded.png" alt="a screenshot of the demo">
<p>saving as svg (includes your program!), png, jpeg</p>
<p>double click diagram</p>
<p>Drag'n drop</p>
<p>Auto render</p>
<p>Language switch.</p>
<p>Help</p>


</article>

<article id="mscgen" class="shadow">
<h1>Mscgen</h1>
<p>For a complete <em>mscgen</em> reference visit
<a href="http://www.mcternan.me.uk/mscgen" target="_blank">the site of its creator</a>.</p>
<p>Click!</p>
<p>Why?</p>
<p>- mscgen compatibility,</p>
<p>- doxygen integration.</p>
<p>- Features: coloring, arcskip, hyperlinks</p>

<section>
<h2 id="coloring">Coloring</h2>
<p>textcolor, textbgcolor, linecolor</p>
<pre class="code mscgen">
msc {
hscale="0.9";
    
a [label="linecolor=\n\"orange\"", 
   <mark>linecolor="orange"</mark>,
b [label="textbgcolor=\n\"yellow\"", 
   <mark>textbgcolor="yellow"</mark>;

a =>> b  [label="linecolor=\"blue\"", 
          <mark>linecolor="blue"</mark>;
b >> a   [label="textcolor=\"green\"",
          <mark>textcolor="green"</mark>;
a => b   [label="textbgcolor=\"lime\"",
          <mark>textbgcolor="lime"</mark>;
a note a [label="color bonanza",
          <mark>linecolor="violet"</mark>
          <mark>textbgcolor="pink"</mark>
          <mark>textcolor="red"</mark>,
b note b  [label="color\nbonanza",
          <mark>linecolor="#7777FF"</mark>
          <mark>textbgcolor="cyan"</mark>
          <mark>textcolor="blue"</mark>;
}
</pre>
<img id="tut32" src="tutorial/tut32.svg" alt="tut32">
</section>

<section>
<h2 id="coloring-everything-departing-from-a-lifeline">Coloring everyting departing from a lifeline</h2>
<pre class="code mscgen">
msc {
hscale="0.6";

  cust [label="customer"],
  ui [label="UI"],
  c [label="Controler", 
     linecolor="red", textbgcolor="yellow",
     <mark>arclinecolor="red", arctextcolor="red",</mark>
     <mark>arctextbgcolor="yellow"],</mark>
  a [label="Customer\nstore"],
  m [label="Model"],
  e [label="Event\nlogger"];

  cust =>> ui [label="Account\n(id, secret)?"];
  ui =>> c [label="Get account\ninfo"];
  c -> e [label="log(id, 'getAccount', 'start')"];
  c => a [label="identify\n(id, secret)"];
  a >> c [label="token"];
  c => m [label="getAccount(id)"];
  m >> c [label="Account data"];
  c =>> c [label="mangle(Account Data)"];
  c -> e [label="log(id, 'getAccount', 'OK')"];
  
  ui &lt;&lt; c [label="Account data"];
  ui =>> ui [label="render"];
}
</pre>
<img id="tut33" src="tutorial/tut33.svg" alt="tut33">
</section>
<section>
<h2 id="arcskip"><code>arcskip</code></h2>
<pre class="code mscgen">
msc {
    a, b;
    
    a =>> b [label="with arcskip", <mark>arcskip="1"</mark>];
    |||;
    a =>> b [label="without arcskip"];
}
</pre>
<img id="tut34" src="tutorial/tut34.svg" alt="tut34">
</section>
<section>
<h2 id="url-id-idurl">url, id, idurl</h2>
<pre class="code mscgen">
msc {
    a [<mark>id="this is the idof entity a"</mark>],
    b [label="link to\ngithub page", 
       <mark>url="http://www.github.com/sverweij/mscgen_js"</mark>];
    
    a => b [label="link to mscgen\nissues on github",
            <mark>url="https://github.com/sverweij/mscgen_js/issues?state=open"</mark>];
            
    a note b [label="works in entities, arcs, notes and boxes",
              <mark>id="id links to about:blank"</mark>,
              <mark>idurl="about:blank"</mark>];
}
</pre>
<img id="tut35" src="tutorial/tut35.svg" alt="tut35">
</section>
</article>
<footer>
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">mscgen_js documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://sverweij.github.io/mscgen_js" property="cc:attributionName" rel="cc:attributionURL">Sander Verweij</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</footer>
</body>
</html>
